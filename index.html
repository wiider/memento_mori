<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Video Player</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      background: black;
      overflow: hidden;
    }
    #wrapper {
      position: fixed;
      inset: 0;
    }
    #ytplayer {
      width: 100%;
      height: 100%;
      border: 0;
    }
  </style>
</head>
<body>
  <div id="wrapper">
    <!-- Der IFrame wird von der YouTube API Ã¼bernommen -->
    <div id="ytplayer"></div>
  </div>

  <!-- YouTube IFrame API -->
  <script src="https://www.youtube.com/iframe_api"></script>

  <script>
    // ðŸ”¹ 1. Konfiguration: Fallback-Liste von Videos (wenn kein Parameter gesetzt ist)
    const fallbackVideos = [
      "l0gokKjzH6s", // Beispiel 1
      "dQw4w9WgXcQ"  // Beispiel 2
      // hier kannst du mehr VIDEO_IDs eintragen
    ];

    // ðŸ”¹ 2. Hilfsfunktionen fÃ¼r URL-Parameter
    function getQueryParam(name) {
      const url = new URL(window.location.href);
      return url.searchParams.get(name);
    }

    // ðŸ”¹ 3. Video-ID aus verschiedenen Eingabeformen extrahieren
    // - reine ID: "l0gokKjzH6s"
    // - watch-URL: "https://www.youtube.com/watch?v=l0gokKjzH6s&..."
    // - short URL: "https://youtu.be/l0gokKjzH6s?..."
    function extractVideoId(input) {
      if (!input) return null;

      // trim
      input = input.trim();

      // 3a) Wenn es wie eine volle URL aussieht
      try {
        const u = new URL(input);

        // youtube.com/watch?v=...
        if (u.hostname.includes("youtube.com")) {
          const v = u.searchParams.get("v");
          if (v) return v;
        }

        // youtu.be/VIDEO_ID
        if (u.hostname === "youtu.be") {
          const parts = u.pathname.split("/");
          if (parts.length > 1 && parts[1].length > 0) {
            return parts[1];
          }
        }
      } catch (e) {
        // war keine URL, ignorieren wir â€“ kÃ¶nnte eine rohe ID sein
      }

      // 3b) Falls wir hier sind: einfach zurÃ¼ckgeben, vielleicht ist es schon die ID
      return input;
    }

    function pickVideoId() {
      // PrioritÃ¤t 1: ?video= (kann ID ODER volle URL sein)
      const videoParam = getQueryParam("video");
      if (videoParam) {
        const id = extractVideoId(videoParam);
        if (id) return id;
      }

      // PrioritÃ¤t 2: ?v= (ebenfalls ID ODER volle URL)
      const vParam = getQueryParam("v");
      if (vParam) {
        const id = extractVideoId(vParam);
        if (id) return id;
      }

      // PrioritÃ¤t 3: ?n=index aus der Fallback-Liste
      const indexParam = getQueryParam("n");
      if (indexParam !== null) {
        const idx = parseInt(indexParam, 10);
        if (!isNaN(idx) && idx >= 0 && idx < fallbackVideos.length) {
          return fallbackVideos[idx];
        }
      }

      // PrioritÃ¤t 4: zufÃ¤lliges Fallback-Video
      if (fallbackVideos.length > 0) {
        const r = Math.floor(Math.random() * fallbackVideos.length);
        return fallbackVideos[r];
      }

      // Fallback-Fallback
      return "l0gokKjzH6s";
    }

    let player;
    const videoId = pickVideoId();

    // ðŸ”¹ 4. Diese Funktion wird von der YouTube IFrame API aufgerufen
    function onYouTubeIframeAPIReady() {
      player = new YT.Player("ytplayer", {
        videoId: videoId,
        playerVars: {
          autoplay: 1,
          mute: 1,          // wichtig fÃ¼r Autoplay
          controls: 0,      // keine YouTube-Controls
          rel: 0,
          showinfo: 0,
          modestbranding: 1,
          playsinline: 1
        },
        events: {
          onReady: onPlayerReady
        }
      });
    }

    // ðŸ”¹ 5. Wenn der Player bereit ist: Video starten (muted)
    function onPlayerReady(event) {
      try {
        event.target.mute();       // sicherheitshalber nochmal
        event.target.playVideo();  // Start
      } catch (e) {
        console.warn("Konnte Video nicht automatisch starten:", e);
      }
    }

    // (Optional) Du kannst spÃ¤ter von Unreal aus JS aufrufen,
    // um den Ton zu aktivieren, z.B.:
    // function unmute() { player.unMute(); }
  </script>
</body>
</html>

