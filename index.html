<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Video Player</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      background: black;
      overflow: hidden;
    }
    #wrapper {
      position: fixed;
      inset: 0;
    }
    #ytplayer {
      width: 100%;
      height: 100%;
      border: 0;
    }
  </style>
</head>
<body>
  <div id="wrapper">
    <!-- Der IFrame wird von der YouTube API Ã¼bernommen -->
    <div id="ytplayer"></div>
  </div>

  <!-- YouTube IFrame API -->
  <script src="https://www.youtube.com/iframe_api"></script>

  <script>
    // ðŸ”¹ 1. Konfiguration: Fallback-Liste von Videos (wenn kein ?v gesetzt ist)
    const fallbackVideos = [
      "l0gokKjzH6s", // Beispiel 1
      "dQw4w9WgXcQ"  // Beispiel 2
      // hier kannst du mehr VIDEO_IDs eintragen
    ];

    // ðŸ”¹ 2. Hilfsfunktionen fÃ¼r URL-Parameter
    function getQueryParam(name) {
      const url = new URL(window.location.href);
      return url.searchParams.get(name);
    }

    function pickVideoId() {
      // PrioritÃ¤t 1: ?v=VIDEO_ID
      const directId = getQueryParam("v");
      if (directId) return directId;

      // PrioritÃ¤t 2: ?n=index aus der Fallback-Liste
      const indexParam = getQueryParam("n");
      if (indexParam !== null) {
        const idx = parseInt(indexParam, 10);
        if (!isNaN(idx) && idx >= 0 && idx < fallbackVideos.length) {
          return fallbackVideos[idx];
        }
      }

      // PrioritÃ¤t 3: zufÃ¤lliges Fallback-Video
      if (fallbackVideos.length > 0) {
        const r = Math.floor(Math.random() * fallbackVideos.length);
        return fallbackVideos[r];
      }

      // Falls alles schiefgeht â†’ irgendein Default (oder null)
      return "l0gokKjzH6s";
    }

    let player;
    const videoId = pickVideoId();

    // ðŸ”¹ 3. Diese Funktion wird von der YouTube IFrame API aufgerufen
    function onYouTubeIframeAPIReady() {
      player = new YT.Player("ytplayer", {
        videoId: videoId,
        playerVars: {
          autoplay: 1,
          mute: 1,          // wichtig fÃ¼r Autoplay
          controls: 0,      // keine YouTube-Controls
          rel: 0,
          showinfo: 0,
          modestbranding: 1,
          playsinline: 1
        },
        events: {
          onReady: onPlayerReady
        }
      });
    }

    // ðŸ”¹ 4. Wenn der Player bereit ist: Video starten (muted)
    function onPlayerReady(event) {
      try {
        event.target.mute();       // sicherheitshalber nochmal
        event.target.playVideo();  // Start
      } catch (e) {
        console.warn("Konnte Video nicht automatisch starten:", e);
      }
    }

    // (Optional) Du kannst spÃ¤ter von Unreal aus JS aufrufen,
    // um den Ton zu aktivieren, z.B.:
    // function unmute() { player.unMute(); }
  </script>
</body>
</html>

